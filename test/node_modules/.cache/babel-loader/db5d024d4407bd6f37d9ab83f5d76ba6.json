{"ast":null,"code":"var _jsxFileName = \"D:\\\\React_Projects\\\\loblaw-ui-test\\\\test\\\\src\\\\container\\\\dashboard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, usePrevious } from \"react\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getCampaignDetails } from \"../store/actions/campaign\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport CardComponent from '../component/cardwrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar dataImp = [0];\nvar dataClicks = [0];\nvar dataUsers = [0];\nvar dataCtr = [0];\nconst locId = localStorage.getItem('id');\n\nconst Dashboard = props => {\n  _s();\n\n  const campaignId = props.location.campaigns === undefined ? locId : props.location.campaigns.id; //const campaignName = props.location.campaigns.name;\n\n  const campaign = props.location.campaigns;\n  let api_url = \"http://localhost:4000/campaigns\"; //TODO : for store\n  // const dispatch = useDispatch();\n  // const [campaignDetails, setCampaign] = useState();\n  // const campaignData = useSelector((state) => state.campaignState.campaignDetails)\n  //   useEffect(() => {\n  //     console.log(campaignId)\n  //     if (campaignId) {\n  //         dispatch(getCampaignDetails(campaign, 0))\n  //     }\n  // }, [campaignId, dispatch])\n\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    const fetchData = async num => {\n      // let ApiUrlForSearch = '';\n      // if (searchParams) {\n      //   ApiUrlForSearch = ApiUrl+'search?entity_type=city&entity_id='+entity_id + '&q=' + searchParams;\n      // } else {\n      //   ApiUrlForSearch = ApiUrl+'search?entity_type=city&entity_id='+entity_id;\n      // }\n      let ApiUrlForSearch = '';\n\n      if (campaignId === undefined) {\n        ApiUrlForSearch = api_url + '/' + locId + '?number=' + num;\n      } else {\n        ApiUrlForSearch = api_url + '/' + campaignId + '?number=' + num;\n      }\n\n      const result = await fetch(ApiUrlForSearch).then(response => {\n        // TODO:To test static value for validation\n        response.clicks = 0;\n        response.impressions = 0;\n        return response.json();\n      }).catch(err => {\n        throw new Error(err);\n      });\n      setData(result);\n    };\n\n    let num = 0;\n    fetchData(num);\n    const interval = setInterval(() => {\n      num++;\n      fetchData(num);\n    }, 5000);\n    return () => {\n      clearInterval(interval);\n    };\n  }, []);\n  useEffect(() => {\n    window.localStorage.setItem(\"id\", JSON.stringify(props.location.campaigns === undefined ? locId : props.location.campaigns.id));\n  }, []);\n\n  const calculateCtr = (impressions, clicks) => {\n    if (impressions && clicks) {\n      return clicks / impressions * 100;\n    } else {\n      return 0;\n    }\n  };\n\n  const totalCalculateCtr = () => {\n    if (calculateCtr(data.impressions, data.clicks) > 0) {\n      dataCtr.push(calculateCtr(data.impressions, data.clicks));\n    }\n\n    ;\n    var sum = dataCtr.reduce(function (prev, curr) {\n      return curr + prev;\n    }, 0);\n    return sum;\n  };\n\n  const totalImp = () => {\n    if (data.impressions) {\n      dataImp.push(data.impressions);\n    }\n\n    ;\n    var sum = dataImp.reduce(function (prev, curr) {\n      return curr + prev;\n    }, 0);\n    return sum;\n  };\n\n  const totalClicks = () => {\n    if (data.clicks) {\n      dataClicks.push(data.clicks);\n    }\n\n    ;\n    var sum = dataClicks.reduce(function (prev, curr) {\n      return curr + prev;\n    }, 0);\n    return sum;\n  };\n\n  const totalUsers = () => {\n    if (data.users) {\n      dataUsers.push(data.users);\n    }\n\n    ;\n    var sum = dataUsers.reduce(function (prev, curr) {\n      return curr + prev;\n    }, 0);\n    return sum;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(CardComponent, {\n      text: \"Total impressions\",\n      value: totalImp()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Dashboard, \"MNW7rnkI9oNPb711ySWHHHkbM9Y=\");\n\n_c = Dashboard;\nexport default Dashboard; //http://localhost:4000/campaigns/%222%22?number=2\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["D:/React_Projects/loblaw-ui-test/test/src/container/dashboard.js"],"names":["React","useState","useEffect","useRef","usePrevious","useDispatch","useSelector","getCampaignDetails","makeStyles","CardComponent","dataImp","dataClicks","dataUsers","dataCtr","locId","localStorage","getItem","Dashboard","props","campaignId","location","campaigns","undefined","id","campaign","api_url","data","setData","fetchData","num","ApiUrlForSearch","result","fetch","then","response","clicks","impressions","json","catch","err","Error","interval","setInterval","clearInterval","window","setItem","JSON","stringify","calculateCtr","totalCalculateCtr","push","sum","reduce","prev","curr","totalImp","totalClicks","totalUsers","users"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, usePrevious } from \"react\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getCampaignDetails } from \"../store/actions/campaign\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CardComponent from '../component/cardwrap'\r\n\r\nvar dataImp = [0]\r\nvar dataClicks = [0]\r\nvar dataUsers = [0]\r\nvar dataCtr = [0]\r\n\r\nconst locId = localStorage.getItem('id');\r\n\r\nconst Dashboard = (props) => {\r\n \r\n  const campaignId = props.location.campaigns === undefined ? locId : props.location.campaigns.id;\r\n  //const campaignName = props.location.campaigns.name;\r\n  const campaign = props.location.campaigns;\r\n  let api_url = \"http://localhost:4000/campaigns\";\r\n\r\n  //TODO : for store\r\n  // const dispatch = useDispatch();\r\n  // const [campaignDetails, setCampaign] = useState();\r\n  // const campaignData = useSelector((state) => state.campaignState.campaignDetails)\r\n  //   useEffect(() => {\r\n  //     console.log(campaignId)\r\n  //     if (campaignId) {\r\n  //         dispatch(getCampaignDetails(campaign, 0))\r\n  //     }\r\n  // }, [campaignId, dispatch])\r\n\r\n  const [data, setData] = useState([])\r\n\r\n  useEffect(() => {\r\n    const fetchData = async (num) => {\r\n\r\n      // let ApiUrlForSearch = '';\r\n      // if (searchParams) {\r\n      //   ApiUrlForSearch = ApiUrl+'search?entity_type=city&entity_id='+entity_id + '&q=' + searchParams;\r\n      // } else {\r\n      //   ApiUrlForSearch = ApiUrl+'search?entity_type=city&entity_id='+entity_id;\r\n      // }\r\n      let ApiUrlForSearch = '';\r\n      if (campaignId === undefined) {\r\n        ApiUrlForSearch = api_url + '/' + locId + '?number=' + num;\r\n      } else {\r\n        ApiUrlForSearch = api_url + '/' + campaignId + '?number=' + num;\r\n      }\r\n      const result = await fetch(ApiUrlForSearch).then(response => {\r\n        // TODO:To test static value for validation\r\n        response.clicks = 0;\r\n        response.impressions = 0;\r\n        return response.json()\r\n      }).catch(err => {\r\n        throw new Error(err)\r\n      })\r\n      setData(result);\r\n    }\r\n    let num = 0;\r\n    fetchData(num);\r\n    const interval = setInterval(() => {\r\n      num++;\r\n      fetchData(num)\r\n    }, 5000);\r\n    return () => { clearInterval(interval) }\r\n  }, []);\r\n  useEffect(() => {\r\n    window.localStorage.setItem(\"id\", JSON.stringify(props.location.campaigns === undefined ? locId : props.location.campaigns.id))\r\n\r\n  }, [])\r\n\r\n  const calculateCtr = (impressions, clicks) => {\r\n    if (impressions && clicks) {\r\n      return (\r\n        (clicks / impressions) * 100\r\n      )\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  const totalCalculateCtr = () => {\r\n    if (calculateCtr(data.impressions, data.clicks) > 0) {\r\n      dataCtr.push(calculateCtr(data.impressions, data.clicks))\r\n    };\r\n    var sum = dataCtr.reduce(function (prev, curr) {\r\n      return curr + prev;\r\n    }, 0);\r\n    return sum;\r\n  }\r\n  const totalImp = () => {\r\n    if (data.impressions) { dataImp.push(data.impressions) };\r\n    var sum = dataImp.reduce(function (prev, curr) {\r\n      return curr + prev;\r\n    }, 0);\r\n    return sum;\r\n  }\r\n  const totalClicks = () => {\r\n    if (data.clicks) { dataClicks.push(data.clicks) };\r\n    var sum = dataClicks.reduce(function (prev, curr) {\r\n      return curr + prev;\r\n    }, 0);\r\n    return sum;\r\n  }\r\n  const totalUsers = () => {\r\n    if (data.users) { dataUsers.push(data.users) };\r\n    var sum = dataUsers.reduce(function (prev, curr) {\r\n      return curr + prev;\r\n    }, 0);\r\n    return sum;\r\n  }\r\n  return (\r\n    <div>\r\n      <CardComponent text=\"Total impressions\" value={totalImp()} />\r\n      {/* <Cardwrap title=\"Total click\" value={totalClicks()} />\r\n      <Cardwrap text=\"Total CTR\" value={totalCalculateCtr()} />\r\n      <Cardwrap text=\"Total users\" value={totalUsers()} />\r\n      <Cardwrap text=\"Most recent impressions\" value={data.impressions} />\r\n      <Cardwrap text=\"Most recent clicks\" value={data.clicks} />\r\n      <Cardwrap text=\"Most recent CTR\" value={calculateCtr(data.impressions, data.clicks)} />\r\n      <Cardwrap text=\"Most recent users\" value={data.users} /> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n\r\n//http://localhost:4000/campaigns/%222%22?number=2\r\n"]},"metadata":{},"sourceType":"module"}