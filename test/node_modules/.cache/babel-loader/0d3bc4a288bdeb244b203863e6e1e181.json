{"ast":null,"code":"var _jsxFileName = \"D:\\\\React_Projects\\\\loblaw-ui-test\\\\test\\\\src\\\\components\\\\dashboard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, usePrevious } from \"react\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getCampaignDetails } from \"../store/actions/campaign\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar dataImp = [0];\nvar dataClicks = [0];\nvar dataUsers = [0];\nvar dataCtr = [0];\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    margin: '10px',\n    overflow: 'hidden',\n    backgroundColor: theme.palette.background.paper\n  },\n  gridList: {\n    width: 500,\n    height: 450\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)'\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12,\n    textAlign: 'center',\n    fontWeight: 600\n  },\n  row: {\n    width: '97%'\n  },\n  cardContent: {\n    width: '100%',\n    textAlign: 'center'\n  }\n}));\n\nconst Dashboard = props => {\n  _s();\n\n  const classes = useStyles();\n  const campaignId = props.location.campaigns.id;\n  const campaignName = props.location.campaigns.name;\n  const campaign = props.location.campaigns;\n  const locId = localStorage.getItem('data-forever');\n  let api_url = \"http://localhost:4000/campaigns\"; //TODO : for store\n  // const dispatch = useDispatch();\n  // const [campaignDetails, setCampaign] = useState();\n  // const campaignData = useSelector((state) => state.campaignState.campaignDetails)\n  //   useEffect(() => {\n  //     console.log(campaignId)\n  //     if (campaignId) {\n  //         dispatch(getCampaignDetails(campaign, 0))\n  //     }\n  // }, [campaignId, dispatch])\n\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    const fetchData = async num => {\n      let ApiUrlForSearch = '';\n\n      if (campaignId === undefined) {\n        ApiUrlForSearch = api_url + '/' + locId + '?number=' + num;\n      } else {\n        ApiUrlForSearch = api_url + '/' + campaignId + '?number=' + num;\n      }\n\n      const result = await fetch(ApiUrlForSearch).then(response => {\n        // TODO:To test static value for validation\n        // response.clicks = 0;\n        // response.impressions = 0;\n        return response.json();\n      }).catch(err => {\n        throw new Error(err);\n      });\n      setData(result);\n    };\n\n    let num = 0;\n    fetchData(num);\n    const interval = setInterval(() => {\n      num++;\n      fetchData(num);\n      const data = window.localStorage.getItem(\"data-forever\");\n      setData(JSON.parse(data));\n    }, 5000);\n    return () => {\n      clearInterval(interval);\n    };\n  }, []);\n  useEffect(() => {\n    window.localStorage.setItem(\"data-forever\", JSON.stringify(props.location.campaigns.id));\n  });\n\n  const calculateCtr = (impressions, clicks) => {\n    if (impressions && clicks) {\n      return clicks / impressions * 100;\n    } else {\n      return 0;\n    }\n  };\n\n  const totalCalculateCtr = () => {\n    if (calculateCtr(data.impressions, data.clicks) > 0) {\n      dataCtr.push(calculateCtr(data.impressions, data.clicks));\n    }\n\n    ;\n    var sum = dataCtr.reduce(function (prev, curr) {\n      return curr + prev;\n    }, 0);\n    return sum;\n  };\n\n  const totalImp = () => {\n    if (data.impressions) {\n      dataImp.push(data.impressions);\n    }\n\n    ;\n    var sum = dataImp.reduce(function (prev, curr) {\n      return curr + prev;\n    }, 0);\n    return sum;\n  };\n\n  const totalClicks = () => {\n    if (data.clicks) {\n      dataClicks.push(data.clicks);\n    }\n\n    ;\n    var sum = dataClicks.reduce(function (prev, curr) {\n      return curr + prev;\n    }, 0);\n    return sum;\n  };\n\n  const totalUsers = () => {\n    if (data.users) {\n      dataUsers.push(data.users);\n    }\n\n    ;\n    var sum = dataUsers.reduce(function (prev, curr) {\n      return curr + prev;\n    }, 0);\n    return sum;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.row,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: campaignName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), console.log('locid', locId), /*#__PURE__*/_jsxDEV(Card, {\n        className: classes.root,\n        variant: \"outlined\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          className: classes.cardContent,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            component: \"h2\",\n            children: \"Total impressions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.pos,\n            color: \"textSecondary\",\n            children: totalImp()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: classes.root,\n        variant: \"outlined\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          className: classes.cardContent,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            component: \"h2\",\n            children: \"Total clicks\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.pos,\n            color: \"textSecondary\",\n            children: totalClicks()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.row,\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        className: classes.root,\n        variant: \"outlined\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          className: classes.cardContent,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            component: \"h2\",\n            children: \"Total users\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.pos,\n            color: \"textSecondary\",\n            children: totalUsers()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: classes.root,\n        variant: \"outlined\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          className: classes.cardContent,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            component: \"h2\",\n            children: \"Total CTR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.pos,\n            color: \"textSecondary\",\n            children: totalCalculateCtr()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: classes.root,\n        variant: \"outlined\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          className: classes.cardContent,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            component: \"h2\",\n            children: \"Most recent impressions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.pos,\n            color: \"textSecondary\",\n            children: data.impressions\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: classes.root,\n        variant: \"outlined\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          className: classes.cardContent,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            component: \"h2\",\n            children: \"Most recent clicks\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.pos,\n            color: \"textSecondary\",\n            children: data.clicks\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: classes.root,\n        variant: \"outlined\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          className: classes.cardContent,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            component: \"h2\",\n            children: \"CTR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.pos,\n            color: \"textSecondary\",\n            children: calculateCtr(data.impressions, data.clicks)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: classes.root,\n        variant: \"outlined\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          className: classes.cardContent,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            component: \"h2\",\n            children: \"Most recent users\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.pos,\n            color: \"textSecondary\",\n            children: data.users\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Dashboard, \"Vkqq6nQ1eVGCdF5tv+1eyKCeSC4=\", false, function () {\n  return [useStyles];\n});\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["D:/React_Projects/loblaw-ui-test/test/src/components/dashboard.js"],"names":["React","useState","useEffect","useRef","usePrevious","useDispatch","useSelector","getCampaignDetails","makeStyles","Card","CardContent","Typography","dataImp","dataClicks","dataUsers","dataCtr","useStyles","theme","root","display","flexWrap","margin","overflow","backgroundColor","palette","background","paper","gridList","width","height","padding","spacing","textAlign","color","text","secondary","bullet","transform","title","fontSize","pos","marginBottom","fontWeight","row","cardContent","Dashboard","props","classes","campaignId","location","campaigns","id","campaignName","name","campaign","locId","localStorage","getItem","api_url","data","setData","fetchData","num","ApiUrlForSearch","undefined","result","fetch","then","response","json","catch","err","Error","interval","setInterval","window","JSON","parse","clearInterval","setItem","stringify","calculateCtr","impressions","clicks","totalCalculateCtr","push","sum","reduce","prev","curr","totalImp","totalClicks","totalUsers","users","console","log"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, usePrevious } from \"react\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getCampaignDetails } from \"../store/actions/campaign\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Typography from '@material-ui/core/Typography';\r\nvar dataImp = [0]\r\nvar dataClicks = [0]\r\nvar dataUsers = [0]\r\nvar dataCtr = [0]\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    margin: '10px',\r\n    overflow: 'hidden',\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  gridList: {\r\n    width: 500,\r\n    height: 450,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  bullet: {\r\n    display: 'inline-block',\r\n    margin: '0 2px',\r\n    transform: 'scale(0.8)',\r\n  },\r\n  title: {\r\n    fontSize: 14,\r\n  },\r\n  pos: {\r\n    marginBottom: 12,\r\n    textAlign: 'center',\r\n    fontWeight: 600\r\n  },\r\n  row: {\r\n    width: '97%'\r\n  },\r\n  cardContent: {\r\n    width: '100%',\r\n    textAlign: 'center'\r\n  },\r\n}));\r\nconst Dashboard = (props) => {\r\n  const classes = useStyles();\r\n\r\n  const campaignId = props.location.campaigns.id;\r\n  const campaignName = props.location.campaigns.name;\r\n  const campaign = props.location.campaigns;\r\n  const locId = localStorage.getItem('data-forever');\r\n  let api_url = \"http://localhost:4000/campaigns\";\r\n\r\n  //TODO : for store\r\n    // const dispatch = useDispatch();\r\n    // const [campaignDetails, setCampaign] = useState();\r\n    // const campaignData = useSelector((state) => state.campaignState.campaignDetails)\r\n    //   useEffect(() => {\r\n    //     console.log(campaignId)\r\n    //     if (campaignId) {\r\n    //         dispatch(getCampaignDetails(campaign, 0))\r\n    //     }\r\n    // }, [campaignId, dispatch])\r\n\r\n  const [data, setData] = useState([])\r\n\r\n  useEffect(() => {\r\n    const fetchData = async (num) => {\r\n      let ApiUrlForSearch = '';\r\n      if (campaignId === undefined) {\r\n        ApiUrlForSearch = api_url + '/' + locId+ '?number=' + num;\r\n      } else {\r\n        ApiUrlForSearch = api_url + '/' + campaignId+ '?number=' + num;\r\n      }\r\n      const result = await fetch(ApiUrlForSearch ).then(response => {\r\n        // TODO:To test static value for validation\r\n        // response.clicks = 0;\r\n        // response.impressions = 0;\r\n        return response.json()\r\n      }).catch(err => {\r\n        throw new Error(err)\r\n      })\r\n      setData(result);\r\n    }\r\n    let num = 0;\r\n    fetchData(num);\r\n    const interval = setInterval(() => {\r\n      num++;\r\n      fetchData(num)\r\n      const data =  window.localStorage.getItem(\"data-forever\")\r\n      setData(JSON.parse(data))\r\n    }, 5000);\r\n    return () => { clearInterval(interval) }\r\n  }, []);\r\n  useEffect(()=>{\r\n    window.localStorage.setItem(\"data-forever\" , JSON.stringify(props.location.campaigns.id))\r\n  })\r\n  \r\n  const calculateCtr = (impressions, clicks) => {\r\n    if (impressions && clicks) {\r\n      return (\r\n        (clicks / impressions) * 100\r\n      )\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  const totalCalculateCtr = () => {\r\n    if (calculateCtr(data.impressions, data.clicks) > 0) {\r\n      dataCtr.push(calculateCtr(data.impressions, data.clicks))\r\n    };\r\n    var sum = dataCtr.reduce(function (prev, curr) {\r\n      return curr + prev;\r\n    }, 0);\r\n    return sum;\r\n  }\r\n  const totalImp = () => {\r\n    if (data.impressions) { dataImp.push(data.impressions) };\r\n    var sum = dataImp.reduce(function (prev, curr) {\r\n      return curr + prev;\r\n    }, 0);\r\n    return sum;\r\n  }\r\n  const totalClicks = () => {\r\n    if (data.clicks) { dataClicks.push(data.clicks) };\r\n    var sum = dataClicks.reduce(function (prev, curr) {\r\n      return curr + prev;\r\n    }, 0);\r\n    return sum;\r\n  }\r\n  const totalUsers = () => {\r\n    if (data.users) { dataUsers.push(data.users) };\r\n    var sum = dataUsers.reduce(function (prev, curr) {\r\n      return curr + prev;\r\n    }, 0);\r\n    return sum;\r\n  }\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.row}>\r\n        <h1>{campaignName}</h1>\r\n        {console.log('locid',locId)}\r\n        <Card className={classes.root} variant=\"outlined\">\r\n          <CardContent className={classes.cardContent}>\r\n            <Typography variant=\"h5\" component=\"h2\">\r\n              Total impressions\r\n         </Typography>\r\n            <Typography className={classes.pos} color=\"textSecondary\">\r\n              {totalImp()}\r\n            </Typography>\r\n          </CardContent>\r\n        </Card>\r\n        <Card className={classes.root} variant=\"outlined\">\r\n          <CardContent className={classes.cardContent}>\r\n            <Typography variant=\"h5\" component=\"h2\">\r\n              Total clicks\r\n        </Typography>\r\n            <Typography className={classes.pos} color=\"textSecondary\">\r\n              {totalClicks()}\r\n            </Typography>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      <div className={classes.row}>\r\n        <Card className={classes.root} variant=\"outlined\">\r\n          <CardContent className={classes.cardContent}>\r\n            <Typography variant=\"h5\" component=\"h2\">\r\n              Total users\r\n        </Typography>\r\n            <Typography className={classes.pos} color=\"textSecondary\">\r\n              {totalUsers()}\r\n            </Typography>\r\n          </CardContent>\r\n        </Card>\r\n        <Card className={classes.root} variant=\"outlined\">\r\n          <CardContent className={classes.cardContent}>\r\n            <Typography variant=\"h5\" component=\"h2\">\r\n              Total CTR\r\n        </Typography>\r\n            <Typography className={classes.pos} color=\"textSecondary\">\r\n              {totalCalculateCtr()}\r\n            </Typography>\r\n          </CardContent>\r\n        </Card>\r\n\r\n\r\n\r\n        <Card className={classes.root} variant=\"outlined\">\r\n          <CardContent className={classes.cardContent}>\r\n            <Typography variant=\"h5\" component=\"h2\">\r\n              Most recent impressions\r\n        </Typography>\r\n            <Typography className={classes.pos} color=\"textSecondary\">\r\n              {data.impressions}\r\n            </Typography>\r\n          </CardContent>\r\n        </Card>\r\n        <Card className={classes.root} variant=\"outlined\">\r\n          <CardContent className={classes.cardContent}>\r\n            <Typography variant=\"h5\" component=\"h2\">\r\n              Most recent clicks\r\n        </Typography>\r\n            <Typography className={classes.pos} color=\"textSecondary\">\r\n              {data.clicks}\r\n            </Typography>\r\n          </CardContent>\r\n        </Card>\r\n        <Card className={classes.root} variant=\"outlined\">\r\n          <CardContent className={classes.cardContent}>\r\n            <Typography variant=\"h5\" component=\"h2\">\r\n              CTR\r\n        </Typography>\r\n            <Typography className={classes.pos} color=\"textSecondary\">\r\n              {calculateCtr(data.impressions, data.clicks)}\r\n            </Typography>\r\n          </CardContent>\r\n        </Card>\r\n        <Card className={classes.root} variant=\"outlined\">\r\n          <CardContent className={classes.cardContent}>\r\n            <Typography variant=\"h5\" component=\"h2\">\r\n              Most recent users\r\n        </Typography>\r\n            <Typography className={classes.pos} color=\"textSecondary\">\r\n              {data.users}\r\n            </Typography>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}